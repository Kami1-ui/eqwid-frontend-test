(this["webpackJsonpeqwid-test"]=this["webpackJsonpeqwid-test"]||[]).push([[0],{190:function(e){e.exports=JSON.parse('{"galleryImages":[{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550746.jpg","width":640,"height":426},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964007.jpg","width":1920,"height":1200},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550739.jpg","width":640,"height":426},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964009.jpg","width":436,"height":650},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550740.jpg","width":600,"height":400},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964008.jpg","width":509,"height":339},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964011.jpg","width":900,"height":450},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550755.jpg","width":480,"height":640},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964013.jpg","width":472,"height":640},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550745.jpg","width":640,"height":425},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964014.jpg","width":240,"height":320},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964016.jpg","width":540,"height":337},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964020.jpg","width":1600,"height":1000},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964010.jpg","width":1506,"height":575},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550754.jpg","width":1280,"height":1276},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964021.jpg","width":1280,"height":800},{"url":"https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964012.jpg","width":787,"height":787}]}')},391:function(e,t,n){},392:function(e,t,n){},393:function(e,t,n){},400:function(e,t,n){},401:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);n(194),n(204);var a=n(2),r=n.n(a),i=n(90),o=n.n(i),s=(n(391),n(392),n(11)),c=n(34),l=n(35),d=n(37),u=n(36),g=n(190),h=(n(393),n(55)),p=n(26),b="LOAD_JSON",m="LOAD_IMAGE",f="SET_IMAGE_IN_LOAD",j="SET_EDIT_MODE",O="DELETE_IMAGE",v="SHOW_LIGHTBOX",x="HIDDEN_LIGHTBOX",y="NEXT_IMAGE",w="PREV_IMAGE",I={galleryImages:[],imagesInLoad:[],editMode:!1,indexShowImage:0,lightboxUrl:""},_=function(e){return{type:b,images:e}},k=function(e){return{type:m,image:e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:for(var n=[],a=e.galleryImages.length;a<t.images.length;a++)n.push(a);return Object(s.a)(Object(s.a)({},e),{},{galleryImages:[].concat(Object(p.a)(e.galleryImages),Object(p.a)(t.images)),imagesInLoad:[].concat(Object(p.a)(e.imagesInLoad),n)});case m:var r={url:t.image.src,width:t.image.width,height:t.image.height};return Object(s.a)(Object(s.a)({},e),{},{galleryImages:[].concat(Object(p.a)(e.galleryImages),[r]),imagesInLoad:[].concat(Object(p.a)(e.imagesInLoad),[e.galleryImages.length])});case v:return Object(s.a)(Object(s.a)({},e),{},{lightboxUrl:e.galleryImages[t.index].url,indexShowImage:t.index});case x:return Object(s.a)(Object(s.a)({},e),{},{lightboxUrl:""});case y:var i=e.indexShowImage+1;return e.galleryImages.length===i&&(i=0),Object(s.a)(Object(s.a)({},e),{},{indexShowImage:i,lightboxUrl:e.galleryImages[i].url});case w:var o=e.indexShowImage-1;return-1===o&&(o=e.galleryImages.length-1),Object(s.a)(Object(s.a)({},e),{},{indexShowImage:o,lightboxUrl:e.galleryImages[o].url});case j:return Object(s.a)(Object(s.a)({},e),{},{editMode:!e.editMode});case O:return Object(s.a)(Object(s.a)({},e),{},{galleryImages:e.galleryImages.filter((function(e,n){return n!==t.index}))});case f:return Object(s.a)(Object(s.a)({},e),{},{imagesInLoad:t.isFetching?[e.imagesInLoad,t.index]:e.imagesInLoad.filter((function(e){return e!==t.index}))});default:return e}},S=n.p+"static/media/preloader.dbb22bcf.gif",D=n(1),L=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={imgProportions:[],imgItemsSize:[],itemsCount:0,minHeight:96},e.setContainer=function(t){e.setState({container:t})},e.alignRows=function(t,n){var a=0;n-=e.props.paddingCssContainer;for(var r=0,i=e.state.minHeight,o=[],s=0;s<e.props.galleryImages.length;s++){var c=t[s]*i;if(n<r+c){var l=(n-r)/(s-a);if(a===s-1){var d=n/t[a],u=n;o[a]={width:u,height:d}}else for(var g=a;g<s;g++){var h=t[g]*i+l,p=i+l;o[g]={width:h,height:p}}a=s,r=c}else r+=c;var b=t[s]*i,m=i;o.push({width:b,height:m})}return o},e.initialItems=function(){var t=[];e.props.galleryImages.forEach((function(e){t.push(e.width/e.height)}));var n=e.props.widthCssContainer;window.screen.width<n&&(n=window.screen.width),window.screen.width<=e.props.minWidthCssContainer&&(n=e.props.minWidthCssContainer);var a=e.alignRows(t,n);e.setState({imgProportions:[].concat(t),itemsCount:e.props.galleryImages.length,imgItemsSize:Object(p.a)(a)})},e.updateScreenSize=function(){if(window.innerWidth<e.props.widthCssContainer){var t=e.alignRows(e.state.imgProportions,window.innerWidth);e.setState({imgItemsSize:Object(p.a)(t)})}if(window.innerWidth<=e.props.minWidthCssContainer){var n=e.alignRows(e.state.imgProportions,e.props.minWidthCssContainer);e.setState({imgItemsSize:Object(p.a)(n)})}},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateScreenSize)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateScreenSize),this.initialItems()}},{key:"componentDidUpdate",value:function(){this.props.galleryImages.length!==this.state.itemsCount&&this.initialItems()}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"gallery__row",children:[this.props.galleryImages?this.props.galleryImages.map((function(t,n){var a=e.props.imagesInLoad.some((function(e){return e===n}));return Object(D.jsxs)("div",{className:"gallery__item",style:e.state.imgItemsSize[n]&&{width:e.state.imgItemsSize[n].width,height:e.state.imgItemsSize[n].height},children:[e.props.editMode&&Object(D.jsx)("button",{className:"gallery__remove",onClick:function(){return e.props.deleteImage(n)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),a&&Object(D.jsx)("img",{src:S,alt:"preloader",className:"gallery__preview"}),Object(D.jsx)("img",{src:t.url,alt:"img-".concat(n),onLoad:function(){return e.props.setImagesInLoad(!1,n)},className:a?"hide gallery__preview":"gallery__preview",onClick:function(){return e.props.showLightbox(n)}})]},n)})):Object(D.jsx)("span",{children:"\u042d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(D.jsx)("div",{className:"gallery__item"})]})}}]),n}(r.a.Component),N=(n(400),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).LightboxDiv=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.LightboxDiv.current.focus()}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"lightbox",tabIndex:"0",ref:this.LightboxDiv,onKeyDown:function(t){switch(t.key){case"ArrowRight":e.props.next();break;case"ArrowLeft":e.props.prev();break;case"Escape":e.props.hide()}},children:[Object(D.jsx)("div",{className:"lightbox__overlay",onClick:function(){return e.props.hide()}}),Object(D.jsx)("div",{className:"lightbox__content",children:Object(D.jsxs)("div",{className:"lightbox__body",children:[Object(D.jsx)("img",{src:this.props.url,alt:"lightbox"}),Object(D.jsxs)("div",{className:"lightbox__navigate",children:[Object(D.jsx)("span",{className:"lightbox__prev",onClick:function(){return e.props.prev()},children:"prev"})," ",Object(D.jsx)("br",{}),Object(D.jsx)("span",{className:"lightbox__next",onClick:function(){return e.props.next()},children:"next"})]})]})})]})}}]),n}(r.a.Component)),E=n(120),U=n.n(E),q=n(192),M=(n(401),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isDrop:!1},e.setDrop=function(t){e.setState({isDrop:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=function(t){t.preventDefault(),e.setDrop(!0)},n=function(t){t.preventDefault(),e.setDrop(!1)},a=function(){var t=Object(q.a)(U.a.mark((function t(n){var a;return U.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),a=Object(p.a)(n.dataTransfer.files),e.props.loadFiles(a),e.setDrop(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(D.jsx)("div",{className:"drag-drop",children:this.state.isDrop?Object(D.jsx)("div",{className:"drag-drop__area drop",onDragStart:function(e){return t(e)},onDragLeave:function(e){return n(e)},onDragOver:function(e){return t(e)},onDrop:function(e){return a(e)},children:"  \u041e\u0442\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"}):Object(D.jsxs)("div",{className:"drag-drop__area",onDragStart:function(e){return t(e)},onDragLeave:function(e){return n(e)},onDragOver:function(e){return t(e)},children:[" ",Object(D.jsx)("input",{multiple:"multiple",type:"file",id:"input-file",name:"img",onChange:function(t){var n=Object(p.a)(t.target.files);e.props.loadFiles(n)},accept:"image/jpeg,image/png,image/gif,json"}),Object(D.jsx)("label",{htmlFor:"input-file",className:"load-btn",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})," \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"]})})}}]),n}(r.a.Component)),A=n(193),F=function(e){return new Promise((function(t,n){var a=new Image;a.src=e,a.onload=function(){return t(a)},a.onerror=function(e){return n(e)}}))},z=function(e){return A.get(e).then((function(e){return e.data.galleryImages}))},T=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadJson(g.galleryImages)}},{key:"render",value:function(){var e=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{loadFiles:function(t){t.forEach((function(t){switch(t.name.split(".").pop()){case"json":(function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsText(e),a.onload=function(e){return t(e.target.result)},a.onerror=function(e){return n(e)}}))})(t).then((function(t){e.props.loadJson(JSON.parse(t).galleryImages)})).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c "+t.name)}));break;case"jpg":case"png":(function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=function(e){return n(e)},a.readAsDataURL(e)}))})(t).then((function(t){F(t).then((function(t){e.props.loadImage(t)}))})).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c "+t.name)}));break;default:alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430")}}))}}),Object(D.jsx)(L,Object(s.a)(Object(s.a)({},this.props),{},{widthCssContainer:890,minWidthCssContainer:320,paddingCssContainer:30})),""!==this.props.lightboxUrl?Object(D.jsx)(N,{hide:this.props.hiddenLightbox,next:this.props.nextImage,prev:this.props.prevImage,url:this.props.lightboxUrl}):null]})}}]),n}(r.a.Component),J=Object(h.b)((function(e){return{galleryImages:e.gallery.galleryImages,lightboxUrl:e.gallery.lightboxUrl,lightboxShow:e.gallery.lightboxShow,editMode:e.gallery.editMode,imagesInLoad:e.gallery.imagesInLoad}}),{loadImage:k,loadJson:_,showLightbox:function(e){return{type:v,index:e}},nextImage:function(){return{type:y}},prevImage:function(){return{type:w}},hiddenLightbox:function(){return{type:x}},deleteImage:function(e){return{type:O,index:e}},setImagesInLoad:function(e,t){return{type:f,index:t,isFetching:e}}})(T),P=n.p+"static/media/logo.89d98d09.png",R=(n(420),function(e){return Object(D.jsx)("header",{className:"header",children:Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("div",{className:"header__body",children:[Object(D.jsx)("div",{className:"header__logo",children:Object(D.jsx)("img",{src:P,alt:""})}),Object(D.jsxs)("div",{className:"header__tools",children:[Object(D.jsxs)("div",{className:"header__add add-img",children:[Object(D.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 url \u0438\u043b\u0438 json",value:e.inputUrl,onChange:function(t){var n=t.target.value;e.updateInputUrl(n)},className:"add-img__input",onKeyDown:function(t){return"Enter"===t.key?e.loadUrl():null}}),Object(D.jsx)("input",{type:"button",className:"add-img__btn header__btn",onClick:e.loadUrl,value:"\u0418\u043c\u043f\u043e\u0440\u0442"})]}),Object(D.jsx)("input",{type:"button",className:"header__edit-btn header__btn",onClick:e.setEditMode,value:"\u0420\u0430\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})})})}),W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inputUrl:"",fileExtend:""},e.loadUrl=function(){var t=e.state.inputUrl;switch(e.state.fileExtend){case"json":z(t).then((function(t){e.props.loadJson(t)})).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c json "+t)}));break;case"jpg":case"png":F(t).then((function(t){e.props.loadImage(t)})).catch((function(){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u0435\u043d\u0438\u0435 "+t)}));break;default:alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 "+t)}},e.updateInputUrl=function(t){var n=t.split(".").pop();e.setState({inputUrl:t,fileExtend:n})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(D.jsx)(R,Object(s.a)(Object(s.a)({},this.props),{},{inputUrl:this.state.inputUrl,loadUrl:this.loadUrl,updateInputUrl:this.updateInputUrl}))}}]),n}(r.a.Component),G=Object(h.b)(null,{loadImage:k,loadJson:_,setEditMode:function(){return{type:j}}})(W),H=function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)(G,{}),Object(D.jsx)("div",{className:"container",children:Object(D.jsx)(J,{})})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,422)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))},X=n(69),K=Object(X.b)({gallery:C}),V=Object(X.c)(K),Q=V;window.store=V,o.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(h.a,{store:Q,children:Object(D.jsx)(H,{})})}),document.getElementById("root")),B()}},[[421,1,2]]]);
//# sourceMappingURL=main.fa7ecb12.chunk.js.map